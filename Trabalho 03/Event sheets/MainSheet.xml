<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>MainSheet</name>
    <events>
        <include>Enemies</include>
        <comment>Number of Bombs the Player has</comment>
        <variable constant="0" name="Bombs" sid="4912718610940361" static="0" type="number">3</variable>
        <comment>Number of Lives the Player has</comment>
        <variable constant="0" name="Lives" sid="1566409325247134" static="0" type="number">3</variable>
        <comment>Current score</comment>
        <variable constant="0" name="Score" sid="7776303994093549" static="0" type="number">0</variable>
        <comment>Best score the player ever got</comment>
        <variable constant="0" name="HighScore" sid="9165856195509204" static="0" type="number">0</variable>
        <event-group collapsed="1" description="System events." sid="229269666203367" title="System">
            <sub-events>
                <comment>Loads High Score from the Local Storage, or initializes the storage if there is no high score saved, yet.</comment>
                <event-block sid="8522581107844852">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="4711130117641328" type="System" />
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="2161698010031804">
                            <conditions>
                                <condition id="3" inverted="1" name="Local key exists" sid="6956392931867551" type="HighScore">
                                    <param id="0" name="Key">&quot;Retro_HighScore&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Set local value" sid="6412227235545479" type="HighScore">
                                    <param id="0" name="Key">&quot;Retro_HighScore&quot;</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-9" name="Set value" sid="7651252801444569" type="System">
                                    <param id="0" name="Variable">HighScore</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="5094689981041095">
                            <conditions>
                                <condition id="-22" name="Else" sid="6452294515714676" type="System" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="5264166514681317" type="System">
                                    <param id="0" name="Variable">HighScore</param>
                                    <param id="1" name="Value">HighScore.LocalValue(&quot;Retro_HighScore&quot;)</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>If the player beats the High Score, save new High Score on Local Storage.</comment>
                <event-block sid="2907300660749194">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="2295580168123089" type="System">
                            <param id="0" name="Variable">Score</param>
                            <param id="1" name="Comparison">5</param>
                            <param id="2" name="Value">HighScore</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="3180499667121838" type="System">
                            <param id="0" name="Variable">HighScore</param>
                            <param id="1" name="Value">Score</param>
                        </action>
                        <action id="0" name="Set local value" sid="3368243722514145" type="HighScore">
                            <param id="0" name="Key">&quot;Retro_HighScore&quot;</param>
                            <param id="1" name="Value">HighScore</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="Control events and alternative control methods." sid="3330454796225328" title="Controls">
            <sub-events>
                <comment>Shoots if the shooting conditions are met:&#x0D;&#x0A;* Player must not be on Pacifist Mode&#x0D;&#x0A;* Player can only shoot every 0.1 seconds&#x0D;&#x0A;* Player must do one shooting action.&#x0D;&#x0A;&#x0D;&#x0A;The shooting actions are:&#x0D;&#x0A;* Using the Gamepad Right Stick in one direction;&#x0D;&#x0A;* Pressing the Left mouse button.&#x0D;&#x0A;&#x0D;&#x0A;The player angle is decided by:&#x0D;&#x0A;* Right analog stick position, if the player is using the gamepad.&#x0D;&#x0A;* Mouse position, if the mouse button is pressed.</comment>
                <event-block sid="3648900360033787">
                    <conditions>
                        <condition id="-6" name="Every X seconds" sid="1613179322179721" type="System">
                            <param id="0" name="Interval (seconds)">0.1</param>
                        </condition>
                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="8640713764070745" type="Player">
                            <param id="0" name="Instance variable">IsPacifist</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block any="1" sid="314896179662306">
                            <conditions>
                                <condition id="5" name="Compare axis" sid="1431476806371417" type="Gamepad">
                                    <param id="0" name="Gamepad">0</param>
                                    <param id="1" name="Axis">2</param>
                                    <param id="2" name="Comparison">1</param>
                                    <param id="3" name="Value">0</param>
                                </condition>
                                <condition id="5" name="Compare axis" sid="1302412051843598" type="Gamepad">
                                    <param id="0" name="Gamepad">0</param>
                                    <param id="1" name="Axis">3</param>
                                    <param id="2" name="Comparison">1</param>
                                    <param id="3" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-8" name="Set angle" sid="7310875148327481" type="Aim">
                                    <param id="0" name="Angle">angle(0,0,Gamepad.Axis(0,2),Gamepad.Axis(0,3))</param>
                                </action>
                                <action id="0" name="Call function" sid="2063939482112092" type="Function">
                                    <param id="0" name="Name">&quot;Shoot&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="8817838906310821">
                            <conditions>
                                <condition id="2" name="Mouse button is down" sid="4163373687289318" type="Mouse">
                                    <param id="0" name="Mouse button">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-21" name="Rotate toward position" sid="2429578859204713" type="Aim">
                                    <param id="0" name="Degrees">90</param>
                                    <param id="1" name="X">Mouse.X</param>
                                    <param id="2" name="Y">Mouse.Y</param>
                                </action>
                                <action id="0" name="Call function" sid="7058982876277009" type="Function">
                                    <param id="0" name="Name">&quot;Shoot&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>Adds alternative inputs for the Go Left Player command.</comment>
                <event-block any="1" sid="4153319097398034">
                    <conditions>
                        <condition id="2" name="Key is down" sid="109727347838234" type="Keyboard">
                            <param id="0" name="Key">65 (A)</param>
                        </condition>
                        <condition id="3" name="Is button down" sid="7909347587000405" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Button">14</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="5277577865855005" type="Player">
                            <param id="0" name="Control">0</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Adds alternative inputs for the Go Up Player command.</comment>
                <event-block any="1" sid="6913005958806872">
                    <conditions>
                        <condition id="2" name="Key is down" sid="5070079005170258" type="Keyboard">
                            <param id="0" name="Key">87 (W)</param>
                        </condition>
                        <condition id="3" name="Is button down" sid="7127532229012265" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Button">12</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="7140119692077333" type="Player">
                            <param id="0" name="Control">2</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Adds alternative inputs for the Go Right Player command.</comment>
                <event-block any="1" sid="7919422407731026">
                    <conditions>
                        <condition id="2" name="Key is down" sid="115364120627172" type="Keyboard">
                            <param id="0" name="Key">68 (D)</param>
                        </condition>
                        <condition id="3" name="Is button down" sid="9303632595013867" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Button">15</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="6905513545534846" type="Player">
                            <param id="0" name="Control">1</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Adds alternative inputs for the Go Down Player command.</comment>
                <event-block any="1" sid="6819042436499002">
                    <conditions>
                        <condition id="2" name="Key is down" sid="7070558477849608" type="Keyboard">
                            <param id="0" name="Key">83 (S)</param>
                        </condition>
                        <condition id="3" name="Is button down" sid="572850491177475" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Button">13</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="6263216966952288" type="Player">
                            <param id="0" name="Control">3</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Translates Gamepad left stick axis input into ship movement.</comment>
                <event-block any="1" sid="8021165857804725">
                    <conditions>
                        <condition id="5" name="Compare axis" sid="6791167457399515" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Axis">0</param>
                            <param id="2" name="Comparison">1</param>
                            <param id="3" name="Value">0</param>
                        </condition>
                        <condition id="5" name="Compare axis" sid="1314980154783136" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Axis">1</param>
                            <param id="2" name="Comparison">1</param>
                            <param id="3" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="3" name="Set speed" sid="1316065229531252" type="Player">
                            <param id="0" name="Speed">Player.8Direction.MaxSpeed</param>
                        </action>
                        <action behavior="8Direction" id="9" name="Set vector X" sid="3982131753296821" type="Player">
                            <param id="0" name="Vector X">Player.8Direction.Speed * Gamepad.Axis(0,0) * dt</param>
                        </action>
                        <action behavior="8Direction" id="10" name="Set vector Y" sid="159416901672005" type="Player">
                            <param id="0" name="Vector Y">Player.8Direction.Speed * Gamepad.Axis(0,1) * dt</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="Player and player effects/helpers (shot, flame jet) events." sid="7784473911862342" title="Player">
            <sub-events>
                <comment>Brings all the player components (Player ship, aim triangle and particle jet) together, every tick.</comment>
                <event-block sid="3792432436643906">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="1295872421626848" type="System" />
                    </conditions>
                    <actions>
                        <action id="-4" name="Set position to another object" sid="16469151885197" type="PlayerJet">
                            <param id="0" name="Object">Player</param>
                            <param id="1" name="Image point (optional)">&quot;Jet&quot;</param>
                        </action>
                        <action id="-8" name="Set angle" sid="3001133632973321" type="PlayerJet">
                            <param id="0" name="Angle">Player.Angle</param>
                        </action>
                        <action id="18" name="Set timeout" sid="4269293498403787" type="PlayerJet">
                            <param id="0" name="Timeout">Player.8Direction.Speed / 100</param>
                        </action>
                        <action id="-4" name="Set position to another object" sid="1994850344601244" type="Aim">
                            <param id="0" name="Object">Player</param>
                            <param id="1" name="Image point (optional)">0</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="Level and Enemy effects." sid="6354348894684341" title="Game Effects">
            <sub-events>
                <comment>Changes the grid color, rotating between all colors, at the interval of 0.1 Hue per tick.</comment>
                <event-block sid="8559464293558853">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="293857517644524" type="System" />
                    </conditions>
                    <actions>
                        <action id="-11" name="Add to" sid="7572889390199887" type="Grid">
                            <param id="0" name="Instance variable">CurrentHue</param>
                            <param id="1" name="Value">0.1</param>
                        </action>
                        <action id="-28" name="Set effect parameter" sid="8969259203808519" type="Grid">
                            <param id="0" name="Effect">&quot;AdjustHSL&quot;</param>
                            <param id="1" name="Parameter index">0</param>
                            <param id="2" name="Value">(Grid.CurrentHue % 200) - 100</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="Music and Sound Effects." sid="7276145793056033" title="Sound">
            <sub-events>
                <comment>Plays the level music when the layout is loaded.</comment>
                <event-block sid="3102609030466335">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="9728584041528688" type="System" />
                    </conditions>
                    <actions>
                        <action id="0" name="Play" sid="8011499044699643" type="Audio">
                            <param id="0" name="Audio file">Theme</param>
                            <param id="2" name="Loop">1</param>
                            <param id="3" name="Volume">0</param>
                            <param id="1" name="Tag (optional)">&quot;MainTheme&quot;</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="HUD and GUI events." sid="2110095843469122" title="GUI">
            <sub-events>
                <comment>Update the score and high score every frame.</comment>
                <event-block sid="8890957871182892">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="4847067047121477" type="System" />
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="9850297362375251" type="HUDScore">
                            <param id="0" name="Text">Score</param>
                        </action>
                        <action id="0" name="Set text" sid="2685271033859384" type="HUDHighScore">
                            <param id="0" name="Text">HighScore</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="Functions and Procedures to be called from other events." sid="6066041066856819" title="Functions">
            <sub-events>
                <comment>Shoot (No Parameters): Fires the shot equiped on the player and plays the shot sound.</comment>
                <event-block sid="8992517613130209">
                    <conditions>
                        <condition id="0" name="On function" sid="8610884636300198" type="Function">
                            <param id="0" name="Name">&quot;Shoot&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Spawn another object" sid="5604447913778866" type="Aim">
                            <param id="0" name="Object">Shot</param>
                            <param id="1" name="Layer">&quot;Game&quot;</param>
                            <param id="2" name="Image point">&quot;Shot&quot;</param>
                        </action>
                        <action id="0" name="Play" sid="8129339100384679" type="Audio">
                            <param id="0" name="Audio file">Fire_normal</param>
                            <param id="2" name="Loop">0</param>
                            <param id="3" name="Volume">0</param>
                            <param id="1" name="Tag (optional)">&quot;&quot;</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
